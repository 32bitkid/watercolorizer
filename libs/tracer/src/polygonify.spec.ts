import { Ring } from './ring';
import { polygonify } from './polygonify';
import { Direction } from './direction';

describe('polygonify', () => {
  it('should simplify', () => {
    // prettier-ignore
    const ring: Ring = [[36,26],[36,27],[35,27],[35,28],[35,29],[34,29],[34,30],[34,31],[33,31],[33,32],[32,32],[32,33],[32,34],[31,34],[31,35],[31,36],[30,36],[30,37],[30,38],[29,38],[29,39],[28,39],[28,40],[28,41],[27,41],[27,42],[27,43],[26,43],[26,44],[27,44],[27,45],[28,45],[29,45],[29,46],[30,46],[31,46],[31,47],[32,47],[32,48],[33,48],[34,48],[34,49],[35,49],[36,49],[36,50],[37,50],[38,50],[38,51],[39,51],[39,52],[40,52],[41,52],[41,53],[42,53],[43,53],[43,54],[44,54],[44,53],[45,53],[45,52],[45,51],[46,51],[46,50],[46,49],[47,49],[47,48],[48,48],[48,47],[48,46],[49,46],[49,45],[49,44],[50,44],[50,43],[50,42],[51,42],[51,41],[52,41],[52,40],[52,39],[53,39],[53,38],[53,37],[54,37],[54,36],[53,36],[53,35],[52,35],[51,35],[51,34],[50,34],[49,34],[49,33],[48,33],[48,32],[47,32],[46,32],[46,31],[45,31],[44,31],[44,30],[43,30],[42,30],[42,29],[41,29],[41,28],[40,28],[39,28],[39,27],[38,27],[37,27],[37,26]];
    const steps: Direction[] = [
      1, 1, 2, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1, 2, 1, 1, 2, 1, 2, 1, 1, 2,
      1, 1, 2, 1, 3, 1, 3, 3, 1, 3, 3, 1, 3, 1, 3, 3, 1, 3, 3, 1, 3, 3, 1, 3, 1,
      3, 3, 1, 3, 3, 1, 3, 0, 3, 0, 0, 3, 0, 0, 3, 0, 3, 0, 0, 3, 0, 0, 3, 0, 0,
      3, 0, 3, 0, 0, 3, 0, 0, 3, 0, 2, 0, 2, 2, 0, 2, 2, 0, 2, 0, 2, 2, 0, 2, 2,
      0, 2, 2, 0, 2, 0, 2, 2, 0, 2, 2, 0,
    ];
    const result = polygonify(ring, steps);
    expect(result).toStrictEqual([
      [36, 26],
      [35, 28],
      [34, 30],
      [33, 32],
      [32, 33],
      [31, 35],
      [30, 37],
      [29, 39],
      [28, 40],
      [27, 42],
      [26, 44],
      [28, 45],
      [30, 46],
      [32, 47],
      [33, 48],
      [35, 49],
      [37, 50],
      [39, 51],
      [40, 52],
      [42, 53],
      [44, 54],
      [45, 52],
      [46, 50],
      [47, 48],
      [48, 47],
      [49, 45],
      [50, 43],
      [51, 41],
      [52, 40],
      [53, 38],
      [54, 36],
      [52, 35],
      [50, 34],
      [48, 33],
      [47, 32],
      [45, 31],
      [43, 30],
      [41, 29],
      [40, 28],
      [38, 27],
      [37, 26],
    ]);
  });
});
